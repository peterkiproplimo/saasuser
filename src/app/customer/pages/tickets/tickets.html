<div class="p-4 overflow-auto">
  <div class="flow-root">
    <div class="m-0">

      <div class="w-full sm:max-w-3xl py-2 mx-auto">
        <div class="overflow-x-auto shadow-sm ring-1 ring-black/5 sm:rounded-lg">

          <table class="min-w-full divide-y divide-gray-300 dark:divide-gray-700">
            <thead class="bg-gray-50 dark:bg-gray-800">
            <tr>
              <th scope="col" class="py-3.5 pr-3 pl-4 text-left text-sm font-semibold text-gray-900 dark:text-gray-100 sm:pl-6">
                ID
              </th>
                <th scope="col" class="py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100">
                    Subject
                </th>
              <th scope="col" class="py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100">
                Priority
              </th>
              <th scope="col" class="py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100">
                Type
              </th>
              <th scope="col" class="py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100">
                Status
              </th>


            </tr>
            </thead>
            <tbody class="divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-900">
            <!-- Loading State -->
              @if (is_loading()) {
                <tr class="w-full">
                  <td colspan="9" class="text-center py-4">
                    <div class="w-full flex justify-center">
                      <p-progressSpinner
                        class="text-gray-500 dark:text-gray-400"
                        [style]="{ width: '40px', height: '40px' }">
                      </p-progressSpinner>
                    </div>
                  </td>
                </tr>
              } @else {

                @if (tickets().data?.length! > 0) {
                  @for (ticket of tickets().data; track ticket.name) {

                    <tr [routerLink]="['/customer/tickets', ticket.name]" class="w-full cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800">
                      <td class="py-3 pr-3 pl-4 text-sm font-medium whitespace-nowrap text-gray-900 dark:text-gray-100 sm:pl-6">
                        {{ ticket.name }}
                      </td>
                        <td class="py-3 px-3 text-sm text-gray-500 dark:text-gray-400">
                            {{ ticket.subject }}
                        </td>

                        <td class="py-3 px-3 text-sm text-gray-500 dark:text-gray-400">
                            {{ ticket.priority }}
                        </td>
                        <td class="py-3 px-3 text-sm text-gray-500 dark:text-gray-400">
                            {{ ticket.ticket_type }}
                        </td>
                        <td class="py-3 px-3 text-sm text-gray-500 dark:text-gray-400">
                            {{ ticket.status }}
                        </td>

                    </tr>

                  }
                } @else {
                  <tr class="w-full">
                    <td colspan="9" class="py-4">
                      <div class="w-full flex justify-center">
                        <app-empty-state
                          class="text-center">
                          <h3
                            class="text-lg font-medium text-gray-700 dark:text-gray-300"
                            slot="title">
                            No Invoices Found
                          </h3>
                          <p
                            class="text-gray-500 dark:text-gray-400 mt-2"
                            slot="message">
                            Try adjusting your search term or check back later for more Invoices.
                          </p>
                        </app-empty-state>
                      </div>
                    </td>
                  </tr>
                }
              }
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="flex justify-center w-full">
  <p-paginator
    (onPageChange)="onPageChange($event)"
    [first]="first()"
    [rows]="pageSize()"
    [totalRecords]="totalRecords()"
    [showCurrentPageReport]="true"
    dropdownAppendTo="body"
    [showPageLinks]="false"
    [showJumpToPageDropdown]="false"
    [rowsPerPageOptions]="[5, 10, 20, 30]"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords}"
  />
</div>

<!--    [totalRecords]="totalRecords()"-->
