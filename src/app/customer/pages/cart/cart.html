<div class="max-w-4xl w-full mx-auto my-8">
  <div class="bg-white dark:bg-gray-900 shadow-lg rounded-lg overflow-hidden">
    <div class="bg-[#1476B7] p-4 flex justify-between items-center">
      <h3 class="text-xl font-semibold text-white">Shopping Cart</h3>

      @if (cartService.getCartItems().length){
      <button
        class="text-gray-200 bg-red-600 dark:bg-red-500 hover:bg-red-700 hover:text-red-50 dark:hover:text-white h-10 px-4 rounded-full transition-colors duration-300"
        (click)="cartService.clearCart()"
      >
        <i class="pi pi-trash mr-2"></i>
        Clear Cart
      </button>
      }
    </div>

    <div class="p-4">
      @if (cartService.getCartItems().length) {
      <div class="grid grid-cols-1 gap-4">
        @for (item of cartService.getCartItems(); track item.plan) {
        <div
          class="flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"
        >
          <div>
            <p class="text-lg font-semibold text-gray-900 dark:text-gray-100">
              {{ item.plan }}
            </p>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              {{ item.cost | number:'1.2-2' }} x {{ item.qty }}
            </p>
          </div>
          <div class="flex items-center gap-2">
            <p-inputNumber
              [(ngModel)]="item.qty"
              [min]="0"
              [showButtons]="true"
              buttonLayout="horizontal"
              inputStyleClass="w-16"
              (ngModelChange)="updateQuantity(item.plan!, $event)"
            />
            <p-button
              icon="pi pi-trash"
              severity="danger"
              [rounded]="true"
              [outlined]="true"
              class="text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20"
              (click)="cartService.removeFromCart(item.plan!)"
            />
          </div>
        </div>
        }
      </div>

      <div class="mt-4 flex flex-col items-end gap-1">
        <p class="text-lg font-medium text-gray-900 dark:text-gray-100">
          Total Items: {{ cartService.totalItems() }}
        </p>
        <p class="text-lg font-medium text-gray-900 dark:text-gray-100">
          Total Cost: {{ cartService.totalCost() | number:'1.2-2' }} KSH
        </p>
        <!-- VAT info -->
        <p class="text-sm text-gray-500 dark:text-gray-400">VAT inclusive</p>
      </div>

      <div class="mt-4 flex justify-end">
        <p-button
          label="Proceed to Checkout"
          icon="pi pi-check"
          severity="success"
          [rounded]="true"
          [outlined]="true"
          class="text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20"
          (click)="checkout()"
        />
      </div>

      } @else {
      <div class="text-center p-4">
        <h3 class="text-lg font-medium text-gray-700 dark:text-gray-300">
          Your Cart is Empty
        </h3>
        <p class="text-gray-500 dark:text-gray-400 my-2">
          Add some items to get started!
        </p>
      </div>
      }
    </div>
  </div>
</div>
