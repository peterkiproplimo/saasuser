<div class="min-h-screen flex flex-col w-full overflow-hidden">
  <div>
    <p-drawer
      class="sm:hidden"
      autoZIndex
      [(visible)]="drawerVisible"
      position="left"
      [modal]="true"
      closable
    >
      <ng-template #headless>
        <div class="bg-gradient-to-b from-blue-900 via-blue-800 to-blue-700 h-full p-6">
          <!-- Mobile Header -->
          <div class="mb-8">
            <div class="flex items-center justify-between mb-4">
              <div class="flex items-center space-x-3">
                <img
                  src="/images/tech-savanna-logo.svg"
                  alt="TechSavanna Logo"
                  class="h-12 w-12 rounded-lg"
                />
                <div>
                  <h2 class="text-xl font-bold text-white">TechSavanna</h2>
                  <p class="text-xs text-blue-200">Customer Portal</p>
                </div>
              </div>
              <button (click)="close_drawer()" class="p-2 text-white hover:text-blue-200 hover:bg-white/10 rounded-lg transition-all duration-200">
                <i class="pi pi-times text-lg"></i>
              </button>
            </div>
            <div class="h-px bg-gradient-to-r from-transparent via-blue-400 to-transparent"></div>
          </div>

          <!-- Mobile Navigation Menu -->
          <nav class="space-y-1">
            <!-- Main Navigation -->
            <div class="space-y-1">
              <button
                (click)="navigateToDashboard()"
                class="block w-full text-left"
              >
                <app-side-bar-item item="Dashboard" icon="pi pi-chart-line" />
              </button>
              
              <button
                (click)="navigateToSubscriptions()"
                class="block w-full text-left"
              >
                <app-side-bar-item item="Subscriptions" icon="pi pi-credit-card" />
              </button>

              <button
                (click)="navigateToSubscribe()"
                class="block w-full text-left"
              >
                <app-side-bar-item item="Purchase Plans" icon="pi pi-shopping-cart" />
              </button>
            </div>

            <!-- Divider -->
            <div class="my-4 h-px bg-gradient-to-r from-transparent via-blue-400/30 to-transparent"></div>

            <!-- Billing Section -->
            <div class="space-y-1">
              <div class="px-3 py-2">
                <h3 class="text-xs font-semibold text-blue-200 uppercase tracking-wider">Billing</h3>
              </div>
              
              <button
                (click)="navigateToInvoices()"
                class="block w-full text-left"
              >
                <app-side-bar-item item="Invoices" icon="pi pi-file-text" />
              </button>
              
              <button
                (click)="navigateToBilling()"
                class="block w-full text-left"
              >
                <app-side-bar-item item="Billing History" icon="pi pi-history" />
              </button>
            </div>

            <!-- Divider -->
            <div class="my-4 h-px bg-gradient-to-r from-transparent via-blue-400/30 to-transparent"></div>

            <!-- Support Section -->
            <div class="space-y-1">
              <div class="px-3 py-2">
                <h3 class="text-xs font-semibold text-blue-200 uppercase tracking-wider">Support</h3>
              </div>
              
              <button
                (click)="navigateToTickets()"
                class="block w-full text-left"
              >
                <app-side-bar-item item="Support Tickets" icon="pi pi-life-ring" />
              </button>
              
              <button
                (click)="navigateToProfile()"
                class="block w-full text-left"
              >
                <app-side-bar-item item="My Profile" icon="pi pi-user" />
              </button>
            </div>
          </nav>
        </div>
      </ng-template>
    </p-drawer>
    <div>
      <div class="flex min-h-screen">
        <aside
          class="hidden sm:block sm:w-72 bg-gradient-to-b from-blue-900 via-blue-800 to-blue-700 px-6 py-6 shadow-xl border-r border-blue-600"
        >
          <!-- Logo Section -->
          <div class="mb-8">
            <div class="flex items-center space-x-3 mb-4">
              <img
                src="/images/tech-savanna-logo.svg"
                alt="TechSavanna Logo"
                class="h-12 w-12 rounded-lg"
              />
              <div>
                <h2 class="text-xl font-bold text-white">TechSavanna</h2>
                <p class="text-xs text-blue-200">Customer Portal</p>
              </div>
            </div>
            <div class="h-px bg-gradient-to-r from-transparent via-blue-400 to-transparent"></div>
          </div>

          <!-- Navigation Menu -->
          <nav class="space-y-1">
            <!-- Main Navigation -->
            <div class="space-y-1">
              <button
                (click)="navigateToDashboard()"
                class="block w-full text-left"
              >
                <app-side-bar-item item="Dashboard" icon="pi pi-chart-line" />
              </button>
              
              <button
                (click)="navigateToSubscriptions()"
                class="block w-full text-left"
              >
                <app-side-bar-item item="Subscriptions" icon="pi pi-credit-card" />
              </button>

              <button
                (click)="navigateToSubscribe()"
                class="block w-full text-left"
              >
                <app-side-bar-item item="Purchase Plans" icon="pi pi-shopping-cart" />
              </button>
            </div>

            <!-- Divider -->
            <div class="my-4 h-px bg-gradient-to-r from-transparent via-blue-400/30 to-transparent"></div>

            <!-- Billing Section -->
            <div class="space-y-1">
              <div class="px-3 py-2">
                <h3 class="text-xs font-semibold text-blue-200 uppercase tracking-wider">Billing</h3>
              </div>
              
              <button
                (click)="navigateToInvoices()"
                class="block w-full text-left"
              >
                <app-side-bar-item item="Invoices" icon="pi pi-file-text" />
              </button>
              
              <button
                (click)="navigateToBilling()"
                class="block w-full text-left"
              >
                <app-side-bar-item item="Billing History" icon="pi pi-history" />
              </button>
            </div>

            <!-- Divider -->
            <div class="my-4 h-px bg-gradient-to-r from-transparent via-blue-400/30 to-transparent"></div>

            <!-- Support Section -->
            <div class="space-y-1">
              <div class="px-3 py-2">
                <h3 class="text-xs font-semibold text-blue-200 uppercase tracking-wider">Support</h3>
              </div>
              
              <button
                (click)="navigateToTickets()"
                class="block w-full text-left"
              >
                <app-side-bar-item item="Support Tickets" icon="pi pi-life-ring" />
              </button>
              
              <button
                (click)="navigateToProfile()"
                class="block w-full text-left"
              >
                <app-side-bar-item item="My Profile" icon="pi pi-user" />
              </button>
            </div>
          </nav>
        </aside>

        <div class="flex-1 overflow-auto">
          <div
            class="flex justify-between items-center border-b border-blue-600 dark:border-blue-600 bg-white dark:bg-gray-900"
          >
            <div class="sm:hidden">
              <p-button
                [icon]="drawerVisible ? 'pi pi-times' : 'pi pi-bars'"
                (onClick)="toggleDrawer()"
                styleClass="p-button-rounded p-button-text p-button-sm"
                aria-label="Toggle menu"
              ></p-button>
            </div>

            @if (loggedIn) {
            <div class="hidden sm:block px-4">
              <p class="font-bold text-xl capitalize">
                Good {{ getTimeOfDay() }}, {{ storedUser.name }}
              </p>
            </div>
            }

            <app-customer-navbar></app-customer-navbar>
          </div>
          <router-outlet></router-outlet>
        </div>
      </div>
    </div>
  </div>
</div>
