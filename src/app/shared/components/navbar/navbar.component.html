<nav
  class="bg-gradient-to-r from-blue-900 via-blue-800 to-blue-700 text-white shadow-lg sticky top-0 z-50 border-b border-blue-600">
  <div class="mx-auto w-full px-4 sm:px-6 lg:px-8">
    <div class="flex h-20 items-center justify-between">
      <!-- Left: Logo + Nav -->
      <div class="inline-flex gap-6 items-center">
        <!-- Logo -->
        <a routerLink="/" class="flex items-center space-x-3">
          <img src="/images/tech-savanna-logo.svg" alt="Techsavanna Logo" class="h-12 w-12 rounded-lg" />
          <div class="hidden sm:block">
            <h1 class="text-xl font-bold text-white">Techsavanna</h1>
            <p class="text-xs text-blue-200">Software Solutions</p>
          </div>
        </a>

        <!-- Desktop Navigation Links -->
        <div class="hidden lg:flex items-center gap-8">
          <a routerLink="/" routerLinkActive="text-blue-200 bg-white/10" [routerLinkActiveOptions]="{exact: true}"
            class="text-white hover:text-blue-200 transition-colors duration-200 cursor-pointer relative group px-3 py-2 rounded-lg">
            Home
            <span
              class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-200 transition-all duration-200 group-hover:w-full"></span>
          </a>

          <!-- Solutions Dropdown -->
          <div class="relative group inline-block solutions-dropdown dropdown-container">
            <a href="#"
              class="flex items-center gap-1 text-white font-semibold group-hover:text-sky-600 transition cursor-pointer px-3 py-2 rounded-lg dropdown-trigger">
              Solutions
              <svg
                class="w-4 h-4 transform transition-transform duration-200 group-hover:rotate-90 text-white group-hover:text-sky-600"
                fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
              </svg>
            </a>

            <div
              class="absolute left-0 mt-2 w-56 bg-white border border-gray-200 rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 ease-in-out z-50 transform translate-y-2 group-hover:translate-y-0 dropdown-menu">
              <ul *ngIf="solutions() as apps" class="py-1">
                <li *ngFor="let app of apps">
                  <a (click)="goToSolution(app)"
                    class="block px-4 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-700 cursor-pointer transition-colors duration-200 border-b border-gray-100 last:border-b-0 dropdown-item">
                    {{ app.name }}
                  </a>
                </li>
              </ul>
            </div>
          </div>

          <!-- Be A Partner Link -->
          <a routerLink="/partner/signup" routerLinkActive="text-blue-200 bg-white/10"
            class="text-white hover:text-blue-200 transition-colors duration-200 cursor-pointer relative group px-3 py-2 rounded-lg">
            Be A Partner
            <span
              class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-200 transition-all duration-200 group-hover:w-full"></span>
          </a>

          <!-- About Us Link -->
          <a routerLink="/about" routerLinkActive="text-blue-200 bg-white/10"
            class="text-white hover:text-blue-200 transition-colors duration-200 cursor-pointer relative group px-3 py-2 rounded-lg">
            About Us
            <span
              class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-200 transition-all duration-200 group-hover:w-full"></span>
          </a>

          <a routerLink="/contactus" routerLinkActive="text-blue-200 bg-white/10"
            class="text-white hover:text-blue-200 transition-colors duration-200 cursor-pointer relative group px-3 py-2 rounded-lg">
            Contact Us
            <span
              class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-200 transition-all duration-200 group-hover:w-full"></span>
          </a>

          <a routerLink="/faqs" routerLinkActive="text-blue-200 bg-white/10"
            class="text-white hover:text-blue-200 transition-colors duration-200 cursor-pointer relative group px-3 py-2 rounded-lg">
            FAQs
            <span
              class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-200 transition-all duration-200 group-hover:w-full"></span>
          </a>
        </div>
      </div>

      <!-- Right: Login / Dark Mode / Profile -->
      <div class="flex items-center space-x-3">
        <!-- Auth Links -->
        @if (!loggedIn) {
        <a routerLink="/auth/login"
          class="px-4 py-2 text-white font-medium hover:text-blue-200 transition-colors duration-200 cursor-pointer">Login</a>
        <a routerLink="/auth/signup"
          class="px-6 py-2 bg-white text-blue-700 font-semibold rounded-lg hover:bg-blue-50 transition-all duration-200 cursor-pointer shadow-sm">Sign
          Up</a>
        } @else {
        <a routerLink="/customer"
          class="px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-all duration-200 cursor-pointer shadow-sm">Customer
          Portal</a>
        }

        <!-- Dark Mode Toggle -->
        <button (click)="toggleDarkMode()"
          class="p-2 text-white hover:text-blue-200 hover:bg-white/10 rounded-lg transition-all duration-200">
          <i [class]="isDarkMode ? 'pi pi-sun' : 'pi pi-moon'" class="text-lg"></i>
        </button>

        <!-- Profile Menu -->
        @if (loggedIn) {
        <button (click)="menu.toggle($event)"
          class="h-10 w-10 cursor-pointer text-white rounded-full ring-2 ring-white/30 hover:ring-white/50 flex items-center justify-center font-bold bg-blue-600 hover:bg-blue-700 transition-all duration-200">
          {{ storedUser.first_name!.charAt(0).toUpperCase()
          }}{{ storedUser.last_name!.charAt(0).toUpperCase() }}
        </button>
        }

        <!-- Mobile menu button -->
        <div class="lg:hidden">
          <button (click)="toggleMenu()"
            class="p-2 text-white hover:text-blue-200 hover:bg-white/10 rounded-lg transition-all duration-200">
            <i [class]="isMenuOpen ? 'pi pi-times' : 'pi pi-bars'" class="text-lg"></i>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Profile Menu (Popup) -->
  <div class="card">
    <p-menu #menu [model]="items" [popup]="true" class="flex justify-center w-max md:w-60">
      <ng-template #end>
        <div class="flex flex-col py-2">
          <button (click)="logout()" pRipple
            class="w-full bg-transparent flex items-start p-2 pl-4 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100 cursor-pointer rounded-none font-bold transition-colors duration-200">
            Logout
          </button>
          <a routerLink="customer/profile"
            class="w-full bg-transparent flex items-start p-2 pl-4 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100 cursor-pointer rounded-none font-bold transition-colors duration-200">
            Member Profile
          </a>
        </div>
      </ng-template>
    </p-menu>
  </div>

  <!-- Mobile Menu -->
  @if (isMenuOpen) {
  <div class="lg:hidden bg-gradient-to-b from-blue-800 to-blue-900 px-6 pt-6 pb-4 space-y-1 border-t border-blue-600"
    (click)="close_menu()">
    <a routerLink="/" routerLinkActive="text-blue-200 bg-white/10" [routerLinkActiveOptions]="{exact: true}"
      class="block px-4 py-3 text-white hover:text-blue-200 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200 font-medium">Home</a>
    <a routerLink="/about" routerLinkActive="text-blue-200 bg-white/10"
      class="block px-4 py-3 text-white hover:text-blue-200 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200 font-medium">About
      Us</a>
    <a routerLink="/contactus" routerLinkActive="text-blue-200 bg-white/10"
      class="block px-4 py-3 text-white hover:text-blue-200 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200 font-medium">Contact
      Us</a>
    <a routerLink="/faqs" routerLinkActive="text-blue-200 bg-white/10"
      class="block px-4 py-3 text-white hover:text-blue-200 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200 font-medium">FAQs</a>
    <a routerLink="/partner/signup" routerLinkActive="text-blue-200 bg-white/10"
      class="block px-4 py-3 text-white hover:text-blue-200 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200 font-medium">Be A Partner</a>

    <!-- Mobile Auth Links -->
    <div class="pt-4 border-t border-blue-600">
      @if (!loggedIn) {
      <a routerLink="/auth/login"
        class="block px-4 py-3 text-white hover:text-blue-200 hover:bg-white/10 rounded-lg cursor-pointer transition-all duration-200 font-medium">Login</a>
      <a routerLink="/auth/signup"
        class="block px-4 py-3 bg-white text-blue-700 hover:bg-blue-50 rounded-lg cursor-pointer transition-all duration-200 font-semibold mx-4 mt-2 text-center">Sign
        Up</a>
      } @else {
      <a routerLink="/customer"
        class="block px-4 py-3 bg-blue-600 text-white hover:bg-blue-700 rounded-lg cursor-pointer transition-all duration-200 font-semibold mx-4 mt-2 text-center">Customer
        Portal</a>
      }
    </div>
  </div>
  }
</nav>